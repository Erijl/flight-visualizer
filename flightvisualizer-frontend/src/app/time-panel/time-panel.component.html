<h1>Time Panel</h1>

<div class="slider-container">
  <mat-form-field>
    <mat-label>Enter date range or date</mat-label>
    <mat-date-range-input [dateFilter]="dateFilter" [rangePicker]="rangePicker" [(ngModel)]="timeFilter.dateRange">
      <input [(ngModel)]="timeFilter.dateRange.start" (ngModelChange)="onDateRangeChange()" matStartDate placeholder="Start date">
      <input [(ngModel)]="timeFilter.dateRange.end" (ngModelChange)="onDateRangeChange()" matEndDate placeholder="End date">
    </mat-date-range-input>
    <mat-datepicker-toggle matSuffix [for]="rangePicker"></mat-datepicker-toggle>
    <mat-date-range-picker #rangePicker></mat-date-range-picker>
  </mat-form-field>
</div>

<div class="slider-container">
  <mat-slider
    class="enlarged-slider"
    min="0"
    max="1439"
    step="1"
    (change)="onTimeRangeChange()">
    <input [ngModel]="timeFilter.timeRange.start" (ngModelChange)="timeFilter.timeRange.start = $event" matSliderStartThumb>
    <input [ngModel]="timeFilter.timeRange.end" (ngModelChange)="timeFilter.timeRange.end = $event" matSliderEndThumb>
  </mat-slider>
  <div class="values-container">
    <div *ngIf="!timeFilter.timeRange.inverted">
      UTC:
      <span>{{ convertIntToTimeOfDay(timeFilter.timeRange.start) }}</span>
      -
      <span>{{ convertIntToTimeOfDay(timeFilter.timeRange.end) }}</span>
    </div>

    <div *ngIf="timeFilter.timeRange.inverted">
      UTC:
      <span>{{ convertIntToTimeOfDay(minTime) }}</span>
      -
      <span>{{ convertIntToTimeOfDay(timeFilter.timeRange.start) }}</span>
      and

      <span>{{ convertIntToTimeOfDay(timeFilter.timeRange.end) }}</span>
      -
      <span>{{ convertIntToTimeOfDay(maxTime) }}</span>
    </div>

    <div *ngIf="panelOpenState"> ({{ timeFilter.timeRange.inverted ? 'exlcuding' : 'including'}} slider)</div>
  </div>
</div>

<br>
<mat-expansion-panel (opened)="panelOpenState = true"
                     (closed)="panelOpenState = false">

  <mat-expansion-panel-header>
    <mat-panel-title>
      Advanced Time Options
    </mat-panel-title>
  </mat-expansion-panel-header>
  Time zone selection: (SelectedTimezone (UTC+Offset)
  <br>
  <mat-slide-toggle [(ngModel)]="timeFilter.includeDifferentDayDepartures" (change)="onIncludeMultiDayFlightChange()">
    Include Different Day Departures
  </mat-slide-toggle>
  <br>
  <mat-slide-toggle [(ngModel)]="timeFilter.includeDifferentDayArrivals" (change)="onIncludeMultiDayFlightChange()">
  Include Different Day Arrivals
</mat-slide-toggle>
  <br>
  <br>
  <mat-slide-toggle [(ngModel)]="timeFilter.timeRange.inverted" (change)="onTimeRangeInvertChange()">
    Invert Time Range selection
  </mat-slide-toggle>
  <br>
  <br>
  <h3>Arrival / Departure Filter</h3>
  <select [(ngModel)]="aircraftTimeFilterType" (change)="onAircraftTimeFilterTypeChange()">
    <option *ngFor="let type of aircraftTimeFilterTypes" [value]="type">{{ type }}</option>
  </select>
  <br>

</mat-expansion-panel>

<br>
<br>

<button (click)="resetFilters()">Reset Filters</button>
